{"version":3,"file":"../pages/profile.js","mappings":"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","sources":["webpack://ch0/./components/FollowList.js","webpack://ch0/./components/NicknameEditForm.js","webpack://ch0/./pages/profile.js","webpack://ch0/external commonjs \"@ant-design/icons\"","webpack://ch0/external commonjs \"antd\"","webpack://ch0/external commonjs \"next-redux-wrapper\"","webpack://ch0/external commonjs \"next/dist/shared/lib/app-router-context.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/head-manager-context.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/is-plain-object.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/mitt.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/page-path/denormalize-page-path.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router-context.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/add-path-prefix.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/compare-states.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/format-next-pathname-info.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/format-url.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/get-next-pathname-info.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/is-bot.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/parse-path.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/path-has-prefix.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/remove-trailing-slash.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/resolve-rewrites.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://ch0/external commonjs \"next/dist/shared/lib/utils.js\"","webpack://ch0/external commonjs \"next/head\"","webpack://ch0/external commonjs \"next/router\"","webpack://ch0/external commonjs \"react\"","webpack://ch0/external commonjs \"react-redux\"","webpack://ch0/external commonjs \"react/jsx-runtime\"","webpack://ch0/external commonjs \"redux\"","webpack://ch0/external commonjs \"redux-devtools-extension\"","webpack://ch0/external commonjs \"redux-saga/effects\"","webpack://ch0/external commonjs \"styled-components\"","webpack://ch0/external module \"axios\"","webpack://ch0/external module \"immer\"","webpack://ch0/external module \"redux-saga\"","webpack://ch0/external module \"swr\""],"sourcesContent":["import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDispatch } from \"react-redux\";\nimport { Button, Card, List } from \"antd\";\nimport { StopOutlined } from \"@ant-design/icons\";\nimport { UNFOLLOW_REQUEST, REMOVE_FOLLOWER_REQUEST } from \"../reducers/user\";\n\nconst FollowList = ({ header, data, onClickMore, loading }) => {\n  const dispatch = useDispatch();\n  const onClick = useCallback(\n    (id) => () => {\n      if (header === \"팔로잉 목록\") {\n        dispatch({ type: UNFOLLOW_REQUEST, data: id });\n      }\n      // 나를 팔로워한 사람을 차단할 수 있는 액션 dispatch\n      if (header === \"팔로워 목록\") {\n        dispatch({ type: REMOVE_FOLLOWER_REQUEST, data: id });\n      }\n    },\n    []\n  );\n  return (\n    <List\n      style={{ marginBottom: 20 }}\n      grid={{ gutter: 4, xs: 2, md: 3 }}\n      size=\"small\"\n      header={<div>{header}</div>}\n      loadMore={\n        <div style={{ textAlign: \"center\", margin: \"10px 0\" }}>\n          <Button onClick={onClickMore} loading={loading}>\n            더 보기\n          </Button>\n        </div>\n      }\n      bordered\n      dataSource={data}\n      renderItem={(item) => (\n        <List.Item style={{ marginTop: 20 }}>\n          <Card\n            actions={[<StopOutlined key=\"stop\" onClick={onClick(item.id)} />]}\n          >\n            <Card.Meta description={item.nickname} />\n          </Card>\n        </List.Item>\n      )}\n    />\n  );\n};\n\n// props vaildation\nFollowList.propTypes = {\n  header: PropTypes.string.isRequired,\n  data: PropTypes.array,\n  onClickMore: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n};\n\nexport default FollowList;\n","import React, { useCallback } from \"react\";\nimport { Form, Input } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useInput from \"../hooks/useInput\";\nimport { CHANGE_NICKNAME_REQUEST } from \"../reducers/user\";\n\nconst NicknameEditForm = () => {\n  const dispatch = useDispatch();\n  const { me, changeNicknameLoading } = useSelector((state) => state.user);\n  const [nickname, onChangeNickname] = useInput(me?.nickname || \"\");\n\n  const onSubmitForm = useCallback(() => {\n    dispatch({ type: CHANGE_NICKNAME_REQUEST, data: nickname });\n  }, [nickname]);\n\n  return (\n    <Form style={{ marginBottom: \"20px\", border: \"1px solid #d9d9d9 20px\" }}>\n      <Input.Search\n        addonBefore=\"닉네임\"\n        enterButton=\"수정\"\n        value={nickname}\n        onChange={onChangeNickname}\n        onSearch={onSubmitForm}\n        loading={changeNicknameLoading}\n        required\n      />\n    </Form>\n  );\n};\n\nexport default NicknameEditForm;\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport Head from \"next/head\";\nimport { useSelector } from \"react-redux\";\nimport Router from \"next/router\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport useSWR from \"swr\";\nimport wrapper from \"../store/configureStore\";\n\nimport AppLayout from \"../components/AppLayout\";\nimport NicknameEditForm from \"../components/NicknameEditForm\";\nimport FollowList from \"../components/FollowList\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nimport { backUrl } from \"../config/config\";\n\nconst fetcher = (url) =>\n  axios.get(url, { withCredentials: true }).then((result) => result.data);\n\nconst profile = () => {\n  const [followersLimit, setFollowersLimit] = useState(3);\n  const [followingsLimit, setFollowingsLimit] = useState(3);\n  const { me } = useSelector((state) => state.user);\n  const { data: followersData, error: followerError } = useSWR(\n    `${backUrl}/user/followers?limit=${followersLimit}`,\n    fetcher\n  );\n  const { data: followingsData, error: followingError } = useSWR(\n    `${backUrl}/user/followings?limit=${followingsLimit}`,\n    fetcher\n  );\n\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.replace(\"/\");\n    }\n  }, [me && me.id]);\n\n  const loadMoreFollowers = useCallback(() => {\n    setFollowersLimit((prev) => prev + 3);\n  }, []);\n\n  const loadMoreFollowings = useCallback(() => {\n    setFollowingsLimit((prev) => prev + 3);\n  }, []);\n\n  if (!me) {\n    return <div>내 정보 로딩중...</div>;\n  }\n\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return <div>팔로잉/팔로워 로딩 중 에러가 발생하였습니다.</div>;\n  }\n\n  return (\n    <>\n      <Head>\n        <title>내 프로필 | NodeBird</title>\n      </Head>\n      <AppLayout>\n        <NicknameEditForm />\n        <FollowList\n          header=\"팔로잉 목록\"\n          data={followingsData}\n          onClickMore={loadMoreFollowings}\n          loading={!(followingsData || followingError)}\n        />\n        <FollowList\n          header=\"팔로워 목록\"\n          data={followersData}\n          onClickMore={loadMoreFollowers}\n          loading={!(followersData || followerError)}\n        />\n      </AppLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  (store) =>\n    async ({ req }) => {\n      const cookie = req ? req.headers.cookie : \"\";\n      axios.defaults.headers.Cookie = \"\";\n      if (req && cookie) {\n        axios.defaults.headers.Cookie = cookie;\n      }\n      store.dispatch({ type: LOAD_MY_INFO_REQUEST });\n      store.dispatch(END);\n      await store.sagaTask.toPromise();\n    }\n);\n\nexport default profile;\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/shared/lib/app-router-context.js\");","module.exports = require(\"next/dist/shared/lib/head-manager-context.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/is-plain-object.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/page-path/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/add-path-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/compare-states.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-next-pathname-info.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-bot.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-path.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/path-has-prefix.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/remove-trailing-slash.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/resolve-rewrites.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");","module.exports = import(\"axios\");;","module.exports = import(\"immer\");;","module.exports = import(\"redux-saga\");;","module.exports = import(\"swr\");;"],"names":["React","useCallback","useDispatch","Button","Card","List","StopOutlined","UNFOLLOW_REQUEST","REMOVE_FOLLOWER_REQUEST","FollowList","header","data","onClickMore","loading","dispatch","onClick","id","type","marginBottom","gutter","xs","md","textAlign","margin","item","marginTop","nickname","Form","Input","useSelector","useInput","CHANGE_NICKNAME_REQUEST","NicknameEditForm","me","changeNicknameLoading","state","user","onChangeNickname","onSubmitForm","border","useEffect","useState","Head","Router","END","axios","useSWR","wrapper","AppLayout","LOAD_MY_INFO_REQUEST","backUrl","fetcher","url","get","withCredentials","then","result","profile","followersLimit","setFollowersLimit","followingsLimit","setFollowingsLimit","followersData","error","followerError","followingsData","followingError","replace","loadMoreFollowers","prev","loadMoreFollowings","console","getServerSideProps","store","req","cookie","headers","defaults","Cookie","sagaTask","toPromise"],"sourceRoot":""}