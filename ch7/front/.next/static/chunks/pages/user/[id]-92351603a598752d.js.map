{"version":3,"file":"static/chunks/pages/user/[id]-92351603a598752d.js","mappings":"oQAsGA,UAxFa,WACX,IAAMA,GAAWC,EAAAA,EAAAA,MAETC,GADOC,EAAAA,EAAAA,aACOC,MAAdF,GACR,GACEG,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,QADvBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aAAcC,EAAjC,EAAiCA,iBAAkBC,EAAnD,EAAmDA,aAE3CC,GAAaP,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMO,QAA1CD,SA6BR,OA3BAE,EAAAA,EAAAA,YAAU,WACJH,GACFI,MAAMJ,KAEP,CAACA,KAEJG,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,WACf,GACEC,OAAOC,QAAUC,SAASC,gBAAgBC,aAC1CF,SAASC,gBAAgBE,aAAe,KAEpCb,IAAiBC,EAAkB,OAC/Ba,EAAM,UAAGf,EAAUA,EAAUgB,OAAS,UAAhC,aAAG,EAAiCtB,GAChDF,EAAS,CACPyB,KAAMC,EAAAA,GACNH,OAAAA,EACAI,KAAMzB,MAMd,OADAe,OAAOW,iBAAiB,SAAUZ,GAC3B,WACLC,OAAOY,oBAAoB,SAAUb,MAEtC,CAACR,EAAUgB,OAAQf,EAAcC,KAElC,iCACE,SAAC,IAAD,WACE,6BAAQE,EAASkB,SAAjB,4BAEF,UAAC,IAAD,YACE,SAAC,IAAD,CACEC,QAAS,EACP,2CAEE,kBACCnB,EAASoB,QAHH,SAKT,iDAEE,kBACCpB,EAASqB,aAHH,eAKT,iDAEE,kBACCrB,EAASsB,YAHH,cAZb,UAmBE,SAAC,SAAD,CACEC,QAAQ,SAAC,IAAD,UAASvB,EAASkB,SAAS,KACnCM,MAAOxB,EAASkB,aAGnBtB,EAAU6B,KAAI,SAAC9B,GAAD,OACb,SAAC,IAAD,CAAwBA,KAAMA,GAAfA,EAAKL,e,qBC/EzBe,OAAOqB,SAAWrB,OAAOqB,UAAY,IAAIC,KAAK,CAC7C,aACA,WACE,OAAO,EAAQ,W","sources":["webpack://_N_E/./pages/user/[id].js","webpack://_N_E/?5a93"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport Head from \"next/head\";\nimport { Card, Avatar } from \"antd\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport wrapper from \"../../store/configureStore\";\n\nimport AppLayout from \"../../components/AppLayout\";\nimport PostCard from \"../../components/PostCard\";\nimport { LOAD_USER_POSTS_REQUEST } from \"../../reducers/post\";\nimport { LOAD_USER_REQUEST, LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\n\nconst User = () => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const { id } = router.query;\n  const { mainPosts, hasMorePosts, loadPostsLoading, retweetError } =\n    useSelector((state) => state.post);\n  const { userInfo } = useSelector((state) => state.user);\n\n  useEffect(() => {\n    if (retweetError) {\n      alert(retweetError);\n    }\n  }, [retweetError]);\n\n  useEffect(() => {\n    const onScroll = () => {\n      if (\n        window.scrollY + document.documentElement.clientHeight >\n        document.documentElement.scrollHeight - 300\n      ) {\n        if (hasMorePosts && !loadPostsLoading) {\n          const lastId = mainPosts[mainPosts.length - 1]?.id;\n          dispatch({\n            type: LOAD_USER_POSTS_REQUEST,\n            lastId,\n            data: id,\n          });\n        }\n      }\n    };\n    window.addEventListener(\"scroll\", onScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [mainPosts.length, hasMorePosts, loadPostsLoading]);\n  return (\n    <>\n      <Head>\n        <title>{userInfo.nickname}님의 글</title>\n      </Head>\n      <AppLayout>\n        <Card\n          actions={[\n            <div key=\"twit\">\n              짹짹\n              <br />\n              {userInfo.Posts}\n            </div>,\n            <div key=\"followings\">\n              팔로잉\n              <br />\n              {userInfo.Followings}\n            </div>,\n            <div key=\"followers\">\n              팔로워\n              <br />\n              {userInfo.Followers}\n            </div>,\n          ]}\n        >\n          <Card.Meta\n            avatar={<Avatar>{userInfo.nickname[0]}</Avatar>}\n            title={userInfo.nickname}\n          />\n        </Card>\n        {mainPosts.map((post) => (\n          <PostCard key={post.id} post={post} />\n        ))}\n      </AppLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  (store) =>\n    async ({ req, params }) => {\n      const cookie = req ? req.headers.cookie : \"\";\n      axios.defaults.headers.Cookie = \"\";\n      if (req && cookie) {\n        axios.defaults.headers.Cookie = cookie;\n      }\n      store.dispatch({ type: LOAD_MY_INFO_REQUEST });\n      store.dispatch({ type: LOAD_USER_REQUEST, data: params.id });\n      store.dispatch({ type: LOAD_USER_POSTS_REQUEST, data: params.id });\n      store.dispatch(END);\n      await store.sagaTask.toPromise();\n    }\n);\nexport default User;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/[id]\",\n      function () {\n        return require(\"private-next-pages/user/[id].js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/user/[id]\"])\n      });\n    }\n  "],"names":["dispatch","useDispatch","id","useRouter","query","useSelector","state","post","mainPosts","hasMorePosts","loadPostsLoading","retweetError","userInfo","user","useEffect","alert","onScroll","window","scrollY","document","documentElement","clientHeight","scrollHeight","lastId","length","type","LOAD_USER_POSTS_REQUEST","data","addEventListener","removeEventListener","nickname","actions","Posts","Followings","Followers","avatar","title","map","__NEXT_P","push"],"sourceRoot":""}