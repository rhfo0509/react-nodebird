{"version":3,"file":"static/chunks/pages/user/[id]-92351603a598752d.js","mappings":"oQAsGA,UAxFa,WACX,IAAMA,GAAWC,EAAAA,EAAAA,MAETC,GADOC,EAAAA,EAAAA,aACOC,MAAdF,GACR,GACEG,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,QADvBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aAAcC,EAAjC,EAAiCA,iBAAkBC,EAAnD,EAAmDA,aAE3CC,GAAaP,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMO,QAA1CD,SA6BR,OA3BAE,EAAAA,EAAAA,YAAU,WACJH,GACFI,MAAMJ,KAEP,CAACA,KAEJG,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,WACf,GACEC,OAAOC,QAAUC,SAASC,gBAAgBC,aAC1CF,SAASC,gBAAgBE,aAAe,KAEpCb,IAAiBC,EAAkB,OAC/Ba,EAAM,UAAGf,EAAUA,EAAUgB,OAAS,UAAhC,aAAG,EAAiCtB,GAChDF,EAAS,CACPyB,KAAMC,EAAAA,GACNH,OAAAA,EACAI,KAAMzB,MAMd,OADAe,OAAOW,iBAAiB,SAAUZ,GAC3B,WACLC,OAAOY,oBAAoB,SAAUb,MAEtC,CAACR,EAAUgB,OAAQf,EAAcC,KAElC,iCACE,SAAC,IAAD,WACE,6BAAQE,EAASkB,SAAjB,4BAEF,UAAC,IAAD,YACE,SAAC,IAAD,CACEC,QAAS,EACP,2CAEE,kBACCnB,EAASoB,QAHH,SAKT,iDAEE,kBACCpB,EAASqB,aAHH,eAKT,iDAEE,kBACCrB,EAASsB,YAHH,cAZb,UAmBE,SAAC,SAAD,CACEC,QAAQ,SAAC,IAAD,UAASvB,EAASkB,SAAS,KACnCM,MAAOxB,EAASkB,aAGnBtB,EAAU6B,KAAI,SAAC9B,GAAD,OACb,SAAC,IAAD,CAAwBA,KAAMA,GAAfA,EAAKL,e,qBC/EzBe,OAAOqB,SAAWrB,OAAOqB,UAAY,IAAIC,KAAK,CAC7C,aACA,WACE,OAAO,EAAQ,W","sources":["webpack://_N_E/./pages/user/[id].js","webpack://_N_E/?5a93"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport Head from \"next/head\";\r\nimport { Card, Avatar } from \"antd\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { END } from \"redux-saga\";\r\nimport axios from \"axios\";\r\nimport wrapper from \"../../store/configureStore\";\r\n\r\nimport AppLayout from \"../../components/AppLayout\";\r\nimport PostCard from \"../../components/PostCard\";\r\nimport { LOAD_USER_POSTS_REQUEST } from \"../../reducers/post\";\r\nimport { LOAD_USER_REQUEST, LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\r\n\r\nconst User = () => {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n  const { mainPosts, hasMorePosts, loadPostsLoading, retweetError } =\r\n    useSelector((state) => state.post);\r\n  const { userInfo } = useSelector((state) => state.user);\r\n\r\n  useEffect(() => {\r\n    if (retweetError) {\r\n      alert(retweetError);\r\n    }\r\n  }, [retweetError]);\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => {\r\n      if (\r\n        window.scrollY + document.documentElement.clientHeight >\r\n        document.documentElement.scrollHeight - 300\r\n      ) {\r\n        if (hasMorePosts && !loadPostsLoading) {\r\n          const lastId = mainPosts[mainPosts.length - 1]?.id;\r\n          dispatch({\r\n            type: LOAD_USER_POSTS_REQUEST,\r\n            lastId,\r\n            data: id,\r\n          });\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener(\"scroll\", onScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", onScroll);\r\n    };\r\n  }, [mainPosts.length, hasMorePosts, loadPostsLoading]);\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>{userInfo.nickname}님의 글</title>\r\n      </Head>\r\n      <AppLayout>\r\n        <Card\r\n          actions={[\r\n            <div key=\"twit\">\r\n              짹짹\r\n              <br />\r\n              {userInfo.Posts}\r\n            </div>,\r\n            <div key=\"followings\">\r\n              팔로잉\r\n              <br />\r\n              {userInfo.Followings}\r\n            </div>,\r\n            <div key=\"followers\">\r\n              팔로워\r\n              <br />\r\n              {userInfo.Followers}\r\n            </div>,\r\n          ]}\r\n        >\r\n          <Card.Meta\r\n            avatar={<Avatar>{userInfo.nickname[0]}</Avatar>}\r\n            title={userInfo.nickname}\r\n          />\r\n        </Card>\r\n        {mainPosts.map((post) => (\r\n          <PostCard key={post.id} post={post} />\r\n        ))}\r\n      </AppLayout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  (store) =>\r\n    async ({ req, params }) => {\r\n      const cookie = req ? req.headers.cookie : \"\";\r\n      axios.defaults.headers.Cookie = \"\";\r\n      if (req && cookie) {\r\n        axios.defaults.headers.Cookie = cookie;\r\n      }\r\n      store.dispatch({ type: LOAD_MY_INFO_REQUEST });\r\n      store.dispatch({ type: LOAD_USER_REQUEST, data: params.id });\r\n      store.dispatch({ type: LOAD_USER_POSTS_REQUEST, data: params.id });\r\n      store.dispatch(END);\r\n      await store.sagaTask.toPromise();\r\n    }\r\n);\r\nexport default User;\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/[id]\",\n      function () {\n        return require(\"private-next-pages/user/[id].js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/user/[id]\"])\n      });\n    }\n  "],"names":["dispatch","useDispatch","id","useRouter","query","useSelector","state","post","mainPosts","hasMorePosts","loadPostsLoading","retweetError","userInfo","user","useEffect","alert","onScroll","window","scrollY","document","documentElement","clientHeight","scrollHeight","lastId","length","type","LOAD_USER_POSTS_REQUEST","data","addEventListener","removeEventListener","nickname","actions","Posts","Followings","Followers","avatar","title","map","__NEXT_P","push"],"sourceRoot":""}