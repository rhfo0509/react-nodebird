{"version":3,"file":"static/chunks/pages/hashtag/[tag]-e862392c1f2cd4ae.js","mappings":"6NAqEA,UAzDgB,WACd,IAAMA,GAAWC,EAAAA,EAAAA,MAETC,GADOC,EAAAA,EAAAA,aACQC,MAAfF,IACR,GACEG,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,QADvBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aAAcC,EAAjC,EAAiCA,iBAAkBC,EAAnD,EAAmDA,aA8BnD,OA3BAC,EAAAA,EAAAA,YAAU,WACJD,GACFE,MAAMF,KAEP,CAACA,KAEJC,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,WACf,GACEC,OAAOC,QAAUC,SAASC,gBAAgBC,aAC1CF,SAASC,gBAAgBE,aAAe,KAEpCX,IAAiBC,EAAkB,OAC/BW,EAAM,UAAGb,EAAUA,EAAUc,OAAS,UAAhC,aAAG,EAAiCC,GAChDvB,EAAS,CACPwB,KAAMC,EAAAA,GACNJ,OAAAA,EACAK,KAAMxB,MAMd,OADAa,OAAOY,iBAAiB,SAAUb,GAC3B,WACLC,OAAOa,oBAAoB,SAAUd,MAEtC,CAACN,EAAUc,OAAQb,EAAcC,KAElC,SAAC,IAAD,UACGF,EAAUqB,KAAI,SAACtB,GAAD,OACb,SAAC,IAAD,CAAwBA,KAAMA,GAAfA,EAAKgB,W,sBChDvBR,OAAOe,SAAWf,OAAOe,UAAY,IAAIC,KAAK,CAC7C,iBACA,WACE,OAAO,EAAQ,W","sources":["webpack://_N_E/./pages/hashtag/[tag].js","webpack://_N_E/?9255"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { END } from \"redux-saga\";\r\nimport axios from \"axios\";\r\nimport wrapper from \"../../store/configureStore\";\r\n\r\nimport AppLayout from \"../../components/AppLayout\";\r\nimport PostCard from \"../../components/PostCard\";\r\nimport { LOAD_HASHTAG_POSTS_REQUEST } from \"../../reducers/post\";\r\nimport { LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\r\n\r\nconst Hashtag = () => {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { tag } = router.query;\r\n  const { mainPosts, hasMorePosts, loadPostsLoading, retweetError } =\r\n    useSelector((state) => state.post);\r\n\r\n  useEffect(() => {\r\n    if (retweetError) {\r\n      alert(retweetError);\r\n    }\r\n  }, [retweetError]);\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => {\r\n      if (\r\n        window.scrollY + document.documentElement.clientHeight >\r\n        document.documentElement.scrollHeight - 300\r\n      ) {\r\n        if (hasMorePosts && !loadPostsLoading) {\r\n          const lastId = mainPosts[mainPosts.length - 1]?.id;\r\n          dispatch({\r\n            type: LOAD_HASHTAG_POSTS_REQUEST,\r\n            lastId,\r\n            data: tag,\r\n          });\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener(\"scroll\", onScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", onScroll);\r\n    };\r\n  }, [mainPosts.length, hasMorePosts, loadPostsLoading]);\r\n  return (\r\n    <AppLayout>\r\n      {mainPosts.map((post) => (\r\n        <PostCard key={post.id} post={post} />\r\n      ))}\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  (store) =>\r\n    async ({ req, params }) => {\r\n      const cookie = req ? req.headers.cookie : \"\";\r\n      axios.defaults.headers.Cookie = \"\";\r\n      if (req && cookie) {\r\n        axios.defaults.headers.Cookie = cookie;\r\n      }\r\n      store.dispatch({ type: LOAD_MY_INFO_REQUEST });\r\n      store.dispatch({ type: LOAD_HASHTAG_POSTS_REQUEST, data: params.tag });\r\n      store.dispatch(END);\r\n      await store.sagaTask.toPromise();\r\n    }\r\n);\r\nexport default Hashtag;\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return require(\"private-next-pages/hashtag/[tag].js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/hashtag/[tag]\"])\n      });\n    }\n  "],"names":["dispatch","useDispatch","tag","useRouter","query","useSelector","state","post","mainPosts","hasMorePosts","loadPostsLoading","retweetError","useEffect","alert","onScroll","window","scrollY","document","documentElement","clientHeight","scrollHeight","lastId","length","id","type","LOAD_HASHTAG_POSTS_REQUEST","data","addEventListener","removeEventListener","map","__NEXT_P","push"],"sourceRoot":""}