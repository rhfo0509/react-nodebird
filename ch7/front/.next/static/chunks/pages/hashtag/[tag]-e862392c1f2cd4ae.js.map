{"version":3,"file":"static/chunks/pages/hashtag/[tag]-e862392c1f2cd4ae.js","mappings":"6NAqEA,UAzDgB,WACd,IAAMA,GAAWC,EAAAA,EAAAA,MAETC,GADOC,EAAAA,EAAAA,aACQC,MAAfF,IACR,GACEG,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,QADvBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aAAcC,EAAjC,EAAiCA,iBAAkBC,EAAnD,EAAmDA,aA8BnD,OA3BAC,EAAAA,EAAAA,YAAU,WACJD,GACFE,MAAMF,KAEP,CAACA,KAEJC,EAAAA,EAAAA,YAAU,WACR,IAAME,EAAW,WACf,GACEC,OAAOC,QAAUC,SAASC,gBAAgBC,aAC1CF,SAASC,gBAAgBE,aAAe,KAEpCX,IAAiBC,EAAkB,OAC/BW,EAAM,UAAGb,EAAUA,EAAUc,OAAS,UAAhC,aAAG,EAAiCC,GAChDvB,EAAS,CACPwB,KAAMC,EAAAA,GACNJ,OAAAA,EACAK,KAAMxB,MAMd,OADAa,OAAOY,iBAAiB,SAAUb,GAC3B,WACLC,OAAOa,oBAAoB,SAAUd,MAEtC,CAACN,EAAUc,OAAQb,EAAcC,KAElC,SAAC,IAAD,UACGF,EAAUqB,KAAI,SAACtB,GAAD,OACb,SAAC,IAAD,CAAwBA,KAAMA,GAAfA,EAAKgB,W,sBChDvBR,OAAOe,SAAWf,OAAOe,UAAY,IAAIC,KAAK,CAC7C,iBACA,WACE,OAAO,EAAQ,W","sources":["webpack://_N_E/./pages/hashtag/[tag].js","webpack://_N_E/?9255"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport wrapper from \"../../store/configureStore\";\n\nimport AppLayout from \"../../components/AppLayout\";\nimport PostCard from \"../../components/PostCard\";\nimport { LOAD_HASHTAG_POSTS_REQUEST } from \"../../reducers/post\";\nimport { LOAD_MY_INFO_REQUEST } from \"../../reducers/user\";\n\nconst Hashtag = () => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const { tag } = router.query;\n  const { mainPosts, hasMorePosts, loadPostsLoading, retweetError } =\n    useSelector((state) => state.post);\n\n  useEffect(() => {\n    if (retweetError) {\n      alert(retweetError);\n    }\n  }, [retweetError]);\n\n  useEffect(() => {\n    const onScroll = () => {\n      if (\n        window.scrollY + document.documentElement.clientHeight >\n        document.documentElement.scrollHeight - 300\n      ) {\n        if (hasMorePosts && !loadPostsLoading) {\n          const lastId = mainPosts[mainPosts.length - 1]?.id;\n          dispatch({\n            type: LOAD_HASHTAG_POSTS_REQUEST,\n            lastId,\n            data: tag,\n          });\n        }\n      }\n    };\n    window.addEventListener(\"scroll\", onScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n    };\n  }, [mainPosts.length, hasMorePosts, loadPostsLoading]);\n  return (\n    <AppLayout>\n      {mainPosts.map((post) => (\n        <PostCard key={post.id} post={post} />\n      ))}\n    </AppLayout>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  (store) =>\n    async ({ req, params }) => {\n      const cookie = req ? req.headers.cookie : \"\";\n      axios.defaults.headers.Cookie = \"\";\n      if (req && cookie) {\n        axios.defaults.headers.Cookie = cookie;\n      }\n      store.dispatch({ type: LOAD_MY_INFO_REQUEST });\n      store.dispatch({ type: LOAD_HASHTAG_POSTS_REQUEST, data: params.tag });\n      store.dispatch(END);\n      await store.sagaTask.toPromise();\n    }\n);\nexport default Hashtag;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/hashtag/[tag]\",\n      function () {\n        return require(\"private-next-pages/hashtag/[tag].js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/hashtag/[tag]\"])\n      });\n    }\n  "],"names":["dispatch","useDispatch","tag","useRouter","query","useSelector","state","post","mainPosts","hasMorePosts","loadPostsLoading","retweetError","useEffect","alert","onScroll","window","scrollY","document","documentElement","clientHeight","scrollHeight","lastId","length","id","type","LOAD_HASHTAG_POSTS_REQUEST","data","addEventListener","removeEventListener","map","__NEXT_P","push"],"sourceRoot":""}