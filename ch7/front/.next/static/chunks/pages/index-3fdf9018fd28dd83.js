(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4377:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return g},default:function(){return x}});var r=t(7294),i=t(9473),o=t(1287),a=t(2587);var u=t(2937);function c(n){return function(n){if(Array.isArray(n))return(0,a.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||(0,u.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=t(6835),s=t(8444),f=t(2831),d=t(1889),m=t(3075),p=t(3551),h=t(5893),v=function(){var n=(0,i.v9)((function(n){return n.post})),e=n.imagePaths,t=n.addPostDone,o=(0,i.I0)(),a=(0,p.Z)(""),u=(0,l.Z)(a,3),v=u[0],y=u[1],g=u[2];(0,r.useEffect)((function(){t&&g("")}),[t]);var x=(0,r.useCallback)((function(){if(!v||!v.trim())return alert("\uac8c\uc2dc\uae00\uc744 \uc791\uc131\ud558\uc138\uc694.");var n=new FormData;e.forEach((function(e){n.append("image",e)})),n.append("content",v),o({type:m.z9,data:n})}),[v,e]),w=(0,r.useRef)(),b=(0,r.useCallback)((function(){w.current.click()}),[w.current]),E=(0,r.useCallback)((function(n){console.log("images",n.target.files);var e=new FormData;c(n.target.files).forEach((function(n){e.append("image",n)})),o({type:m.QA,data:e})}),[]),j=(0,r.useCallback)((function(n){return function(){o({type:m.Po,data:n})}}),[]);return(0,h.jsxs)(s.Z,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onFinish:x,children:[(0,h.jsx)(f.Z.TextArea,{value:v,onChange:y,maxLength:140,placeholder:"\uc5b4\ub5a4 \uc2e0\uae30\ud55c \uc77c\uc774 \uc788\uc5c8\ub098\uc694?"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,ref:w,onChange:E}),(0,h.jsx)(d.Z,{onClick:b,children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"}),(0,h.jsx)(d.Z,{type:"primary",style:{float:"right"},htmlType:"submit",children:"\uc9f9\uc9f9"})]}),(0,h.jsx)("div",{children:e.map((function(n,e){return(0,h.jsxs)("div",{style:{display:"inline-block"},children:[(0,h.jsx)("img",{src:n.replace(/\/thumb\//,"/original/"),style:{width:"200px"},alt:n}),(0,h.jsx)("div",{children:(0,h.jsx)(d.Z,{onClick:j(e),children:"\uc81c\uac70"})})]},n)}))})]})},y=t(9160),g=!0,x=function(){var n=(0,i.I0)(),e=(0,i.v9)((function(n){return n.post})),t=e.mainPosts,a=e.hasMorePosts,u=e.loadPostsLoading,c=e.retweetError,l=(0,i.v9)((function(n){return n.user})).me;return(0,r.useEffect)((function(){c&&alert(c)}),[c]),(0,r.useEffect)((function(){var e=function(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&a&&!u){var e,r=null===(e=t[t.length-1])||void 0===e?void 0:e.id;n({type:m.aO,lastId:r})}};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[t.length,a,u]),(0,h.jsxs)(o.Z,{children:[l&&(0,h.jsx)(v,{}),t.map((function(n){return(0,h.jsx)(y.Z,{post:n},n.id)}))]})}},5557:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4377)}])}},function(n){n.O(0,[885,340,936,695,991,774,888,179],(function(){return e=5557,n(n.s=e);var e}));var e=n.O();_N_E=e}]);